<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chemistry Champion ‚Äì CBSE 10</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    body {
      background: #020617;
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }
    .app {
      width: 100%;
      max-width: 520px;
      background: #020617;
      border-radius: 24px;
      border: 1px solid #1f2937;
      box-shadow: 0 20px 40px rgba(0,0,0,0.45);
      padding: 16px 16px 20px;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
      gap: 8px;
    }
    .title {
      font-size: 1.25rem;
      font-weight: 700;
      line-height: 1.3;
    }
    .title span {
      color: #34d399;
    }
    .subtitle {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 2px;
    }
    .score-box {
      text-align: right;
      font-size: 0.8rem;
    }
    .score-label {
      color: #d1d5db;
    }
    .score-value {
      font-weight: 600;
      color: #34d399;
      font-size: 1rem;
    }
    .timer {
      margin-top: 4px;
      font-size: 0.8rem;
      color: #fbbf24;
    }
    .progress {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: #1f2937;
      overflow: hidden;
      margin-bottom: 12px;
    }
    .progress-inner {
      height: 100%;
      background: #34d399;
      width: 0%;
      transition: width 0.3s ease;
    }
    .card {
      background: rgba(15,23,42,0.95);
      border-radius: 18px;
      border: 1px solid #1f2937;
      padding: 12px;
      margin-bottom: 10px;
    }
    .meta-row {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      color: #9ca3af;
      margin-bottom: 8px;
    }
    .prize {
      color: #fbbf24;
      font-weight: 600;
    }
    .question-text {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 10px;
    }
    .options {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
    }
    @media (min-width: 420px) {
      .options {
        grid-template-columns: 1fr 1fr;
      }
    }
    .option-btn {
      border-radius: 14px;
      border: 1px solid #374151;
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      padding: 10px;
      font-size: 0.85rem;
      text-align: left;
      display: flex;
      align-items: flex-start;
      gap: 6px;
      cursor: pointer;
      transition: all 0.18s ease;
    }
    .option-btn span.label {
      font-family: monospace;
      color: #34d399;
      font-size: 0.8rem;
    }
    .option-btn:hover {
      border-color: #34d399;
      background: #111827;
    }
    .option-btn.correct {
      background: #34d399;
      border-color: #bbf7d0;
      color: #022c22;
    }
    .option-btn.wrong {
      background: #fb7185;
      border-color: #fecaca;
      color: #111827;
    }
    .option-btn.disabled {
      cursor: default;
      opacity: 0.95;
    }
    .footer-row {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    @media (min-width: 420px) {
      .footer-row {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }
    }
    .message {
      font-size: 0.75rem;
      color: #9ca3af;
    }
    .message.highlight {
      color: #34d399;
    }

    /* Summary / Certificate */
    .summary {
      padding-top: 6px;
    }
    .cert-card {
      background: #0b1120;
      border-radius: 16px;
      border: 1px solid #4b5563;
      padding: 14px;
      margin-bottom: 10px;
      text-align: center;
    }
    .cert-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 4px;
      color: #fbbf24;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .cert-name {
      font-size: 1rem;
      font-weight: 600;
      margin: 4px 0;
      color: #e5e7eb;
    }
    .cert-line {
      font-size: 0.85rem;
      color: #d1d5db;
      margin: 2px 0;
    }
    .leaderboard {
      margin-top: 8px;
    }
    .leaderboard-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 4px;
      color: #a5b4fc;
    }
    .leaderboard-list {
      list-style: none;
      font-size: 0.8rem;
    }
    .leaderboard-list li {
      padding: 4px 6px;
      border-radius: 8px;
      background: #020617;
      border: 1px solid #1f2937;
      margin-bottom: 3px;
      display: flex;
      justify-content: space-between;
    }
    .play-again-btn {
      margin-top: 8px;
      width: 100%;
      border-radius: 999px;
      border: none;
      background: #34d399;
      color: #022c22;
      padding: 10px;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
    }
    .play-again-btn:hover {
      background: #6ee7b7;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div>
        <div class="title">
          Kaun Banega <span>Chemistry Champion</span>
        </div>
        <div class="subtitle">CBSE Class 10 ¬∑ KBC-style quiz ¬∑ Tap to play</div>
      </div>
      <div class="score-box">
        <div class="score-label">Player</div>
        <div id="playerNameLabel" class="score-value" style="font-size:0.85rem;"></div>
        <div class="score-label" style="margin-top:2px;">Score</div>
        <div id="score" class="score-value">0</div>
        <div id="timer" class="timer">‚è± 30s</div>
      </div>
    </div>

    <div class="progress">
      <div id="progress-inner" class="progress-inner"></div>
    </div>

    <div id="content"></div>
  </div>

  <script>
    // ---------------- CONFIG ----------------
    const QUESTION_TIME = 30; // seconds per question
    const MAX_QUESTIONS = null; // use null for all questions, or a number like 15

    // ---------------- QUESTIONS ----------------
    const questions = [
      // --- Chemical Reactions & Basics (original 5) ---
      {
        q:"Which gas is released when Zinc reacts with Hydrochloric acid?",
        options:["Oxygen","Carbon dioxide","Hydrogen","Nitrogen"],
        answer:2
      },
      {
        q:"Which of the following is a base?",
        options:["HCl","H‚ÇÇSO‚ÇÑ","NaOH","CO‚ÇÇ"],
        answer:2
      },
      {
        q:"Burning of a candle is an example of which reaction?",
        options:["Endothermic","Exothermic","Displacement","Photochemical"],
        answer:1
      },
      {
        q:"Which metal is stored in kerosene?",
        options:["Iron","Sodium","Copper","Aluminium"],
        answer:1
      },
      {
        q:"What is corrosion?",
        options:[
          "Shining of metal",
          "Damage by air & water",
          "Making bases",
          "Reaction with acid only"
        ],
        answer:1
      },

      // --- Acids, Bases & Salts (10 questions) ---
      {
        q:"Which acid is present in lemon?",
        options:["Acetic acid","Citric acid","Hydrochloric acid","Sulphuric acid"],
        answer:1
      },
      {
        q:"Which base is used in making soap?",
        options:["Calcium hydroxide","Sodium hydroxide","Ammonium hydroxide","Potassium nitrate"],
        answer:1
      },
      {
        q:"What is the pH value of a neutral solution?",
        options:["0","7","14","5"],
        answer:1
      },
      {
        q:"Which gas is produced when an acid reacts with a metal carbonate?",
        options:["Oxygen","Hydrogen","Carbon dioxide","Nitrogen"],
        answer:2
      },
      {
        q:"Which salt is called baking soda?",
        options:["NaCl","NaHCO‚ÇÉ","Na‚ÇÇCO‚ÇÉ","CaCO‚ÇÉ"],
        answer:1
      },
      {
        q:"Which acid is present in the stomach?",
        options:["Sulphuric acid","Nitric acid","Hydrochloric acid","Citric acid"],
        answer:2
      },
      {
        q:"Tooth decay starts when pH of mouth falls below:",
        options:["7.0","6.5","5.5","4.5"],
        answer:2
      },
      {
        q:"Which salt is used to remove hardness of water?",
        options:["Baking soda","Washing soda","Bleaching powder","Common salt"],
        answer:1
      },
      {
        q:"Which indicator is naturally obtained from lichens?",
        options:["Litmus","Methyl orange","Phenolphthalein","Turmeric"],
        answer:0
      },
      {
        q:"Which substance is used to neutralize acidic soil in farms?",
        options:["Slaked lime","Baking soda","Vinegar","Bleaching powder"],
        answer:0
      },

      // --- Metals & Non-metals (10 questions) ---
      {
        q:"Which of the following is a non-metal?",
        options:["Iron","Copper","Sulphur","Aluminium"],
        answer:2
      },
      {
        q:"Which metal is liquid at room temperature?",
        options:["Iron","Mercury","Aluminium","Sodium"],
        answer:1
      },
      {
        q:"Which gas is essential for combustion?",
        options:["Hydrogen","Carbon dioxide","Oxygen","Nitrogen"],
        answer:2
      },
      {
        q:"Which metal is used for galvanisation of iron?",
        options:["Copper","Zinc","Silver","Lead"],
        answer:1
      },
      {
        q:"Which property of metals allows them to be drawn into wires?",
        options:["Malleability","Ductility","Conductivity","Sonority"],
        answer:1
      },
      {
        q:"Which metal is extracted by electrolysis?",
        options:["Iron","Zinc","Aluminium","Copper"],
        answer:2
      },
      {
        q:"Which non-metal is the best conductor of electricity?",
        options:["Sulphur","Carbon (graphite)","Phosphorus","Chlorine"],
        answer:1
      },
      {
        q:"Which metal is the main constituent of steel?",
        options:["Aluminium","Copper","Iron","Nickel"],
        answer:2
      },
      {
        q:"Which process is used to prevent rusting?",
        options:["Electrolysis","Galvanisation","Distillation","Evaporation"],
        answer:1
      },
      {
        q:"Which of the following is the most reactive metal?",
        options:["Iron","Zinc","Potassium","Copper"],
        answer:2
      }
    ];

    // ---------------- STATE ----------------
    let current = 0;
    let score = 0;
    let timeLeft = QUESTION_TIME;
    let timerId = null;
    let locked = false;
    let playerName = "";
    const totalQuestions = MAX_QUESTIONS && MAX_QUESTIONS < questions.length
      ? MAX_QUESTIONS
      : questions.length;

    // ---------------- DOM ----------------
    const contentEl = document.getElementById("content");
    const scoreEl = document.getElementById("score");
    const timerEl = document.getElementById("timer");
    const progressInner = document.getElementById("progress-inner");
    const playerNameLabel = document.getElementById("playerNameLabel");

    // ---------------- SOUND (Web Audio API) ----------------
    let audioContext = null;
    function initAudio() {
      if (!audioContext) {
        try {
          audioContext = new (window.AudioContext || window.webkitAudioContext)();
        } catch (e) {
          audioContext = null;
        }
      }
    }
    function playBeep(frequency, duration) {
      if (!audioContext) return;
      const osc = audioContext.createOscillator();
      const gain = audioContext.createGain();
      osc.type = "sine";
      osc.frequency.value = frequency;
      osc.connect(gain);
      gain.connect(audioContext.destination);
      const now = audioContext.currentTime;
      gain.gain.setValueAtTime(0.15, now);
      gain.gain.exponentialRampToValueAtTime(0.001, now + duration / 1000);
      osc.start(now);
      osc.stop(now + duration / 1000);
    }
    function playCorrectSound() {
      playBeep(800, 150);
      setTimeout(() => playBeep(1000, 150), 160);
    }
    function playWrongSound() {
      playBeep(200, 200);
    }
    function playTimeUpSound() {
      playBeep(500, 150);
    }

    // ---------------- HELPER FUNCTIONS ----------------
    function getTitleFromScore(finalScore) {
      if (finalScore >= 180) return "Chemistry Grandmaster";
      if (finalScore >= 120) return "Chemistry Champion";
      if (finalScore >= 80) return "Rising Scientist";
      return "Needs More Practice";
    }

    function updateProgress() {
      const percent = (current / totalQuestions) * 100;
      progressInner.style.width = percent + "%";
    }

    function startTimer() {
      clearInterval(timerId);
      timeLeft = QUESTION_TIME;
      timerEl.textContent = "‚è± " + timeLeft + "s";
      timerId = setInterval(() => {
        if (timeLeft <= 1) {
          clearInterval(timerId);
          timeLeft = 0;
          timerEl.textContent = "‚è± 0s";
          handleTimeUp();
        } else {
          timeLeft -= 1;
          timerEl.textContent = "‚è± " + timeLeft + "s";
        }
      }, 1000);
    }

    function handleTimeUp() {
      if (locked) return;
      locked = true;
      playTimeUpSound();

      const message = document.querySelector(".message");
      if (message) {
        message.textContent = "‚è∞ Time up! Moving to next question.";
      }

      // Show correct answer briefly
      const btns = contentEl.querySelectorAll(".option-btn");
      const q = questions[current];
      btns.forEach((btn, i) => {
        if (i === q.answer) {
          btn.classList.add("correct");
        }
        btn.classList.add("disabled");
      });

      setTimeout(() => {
        nextQuestionOrEnd();
      }, 1200);
    }

    function nextQuestionOrEnd() {
      current++;
      if (current >= totalQuestions) {
        endGame();
      } else {
        updateProgress();
        renderQuestion();
      }
    }

    // ---------------- LEADERBOARD ----------------
    function saveScoreToLeaderboard(name, score) {
      const key = "chemistry_leaderboard_v1";
      const today = new Date().toISOString().slice(0, 10); // YYYY-MM-DD

      let data = [];
      try {
        const stored = localStorage.getItem(key);
        if (stored) data = JSON.parse(stored);
      } catch (e) {
        data = [];
      }

      data.push({ name, score, date: today });

      // Filter today's scores only (daily challenge)
      const todaysScores = data.filter((item) => item.date === today);
      todaysScores.sort((a, b) => b.score - a.score);
      const top5 = todaysScores.slice(0, 5);

      // Keep older data also, but replace today's with sorted/top5
      const older = data.filter((item) => item.date !== today);
      const finalData = older.concat(top5);

      localStorage.setItem(key, JSON.stringify(finalData));
      return top5;
    }

    // ---------------- RENDERING ----------------
    function renderQuestion() {
      locked = false;
      clearInterval(timerId);

      const q = questions[current];
      updateProgress();
      startTimer();

      contentEl.innerHTML = "";

      const card = document.createElement("div");
      card.className = "card";

      const meta = document.createElement("div");
      meta.className = "meta-row";
      meta.innerHTML =
        "<span>Q" + (current + 1) + " of " + totalQuestions + "</span>" +
        "<span class='prize'>Prize: Practice Question</span>";
      card.appendChild(meta);

      const qText = document.createElement("div");
      qText.className = "question-text";
      qText.textContent = q.q;
      card.appendChild(qText);

      const optionsBox = document.createElement("div");
      optionsBox.className = "options";

      q.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.innerHTML =
          "<span class='label'>" +
          String.fromCharCode(65 + idx) +
          ".</span><span>" +
          opt +
          "</span>";
        btn.onclick = () => handleAnswer(idx);
        optionsBox.appendChild(btn);
      });

      card.appendChild(optionsBox);
      contentEl.appendChild(card);

      const footerRow = document.createElement("div");
      footerRow.className = "footer-row";

      const message = document.createElement("div");
      message.className = "message";
      message.textContent = "Tap the correct option before the time runs out.";
      footerRow.appendChild(message);

      contentEl.appendChild(footerRow);
    }

    function handleAnswer(selectedIndex) {
      if (locked) return;
      locked = true;
      clearInterval(timerId);

      const q = questions[current];
      const correctIndex = q.answer;

      const btns = contentEl.querySelectorAll(".option-btn");
      btns.forEach((btn, i) => {
        btn.classList.add("disabled");
        if (i === selectedIndex && i === correctIndex) {
          btn.classList.add("correct");
        } else if (i === selectedIndex && i !== correctIndex) {
          btn.classList.add("wrong");
        } else if (i === correctIndex) {
          // highlight correct answer lightly if user got it wrong
          if (selectedIndex !== correctIndex) {
            btn.classList.add("correct");
          }
        }
      });

      const message = document.querySelector(".message");

      if (selectedIndex === correctIndex) {
        score += 10;
        scoreEl.textContent = score;
        if (message) {
          message.textContent = "‚úÖ Correct! +10 points.";
          message.classList.add("highlight");
        }
        playCorrectSound();
      } else {
        if (message) {
          message.textContent = "‚ùå Incorrect. Watch the correct answer.";
          message.classList.remove("highlight");
        }
        playWrongSound();
      }

      setTimeout(() => {
        nextQuestionOrEnd();
      }, 1000);
    }

    function endGame() {
      clearInterval(timerId);
      updateProgress();
      contentEl.innerHTML = "";
      timerEl.textContent = "‚è± 0s";

      const title = getTitleFromScore(score);
      const today = new Date().toLocaleDateString("en-IN");

      const summary = document.createElement("div");
      summary.className = "summary";

      const cert = document.createElement("div");
      cert.className = "cert-card";

      const certTitle = document.createElement("div");
      certTitle.className = "cert-title";
      certTitle.textContent = "Certificate of Achievement";
      cert.appendChild(certTitle);

      const line1 = document.createElement("div");
      line1.className = "cert-line";
      line1.textContent = "This certifies that";
      cert.appendChild(line1);

      const nameLine = document.createElement("div");
      nameLine.className = "cert-name";
      nameLine.textContent = playerName || "Chemistry Player";
      cert.appendChild(nameLine);

      const line2 = document.createElement("div");
      line2.className = "cert-line";
      line2.textContent =
        "has completed the Chemistry Champion quiz with a score of " +
        score +
        " points.";
      cert.appendChild(line2);

      const line3 = document.createElement("div");
      line3.className = "cert-line";
      line3.textContent = "Title earned: " + title;
      cert.appendChild(line3);

      const line4 = document.createElement("div");
      line4.className = "cert-line";
      line4.textContent = "Date: " + today;
      cert.appendChild(line4);

      summary.appendChild(cert);

      // Leaderboard
      const top5 = saveScoreToLeaderboard(playerName || "Player", score);
      const board = document.createElement("div");
      board.className = "leaderboard";

      const boardTitle = document.createElement("div");
      boardTitle.className = "leaderboard-title";
      boardTitle.textContent = "üèÖ Today's Top Scores";
      board.appendChild(boardTitle);

      const list = document.createElement("ul");
      list.className = "leaderboard-list";

      if (top5.length === 0) {
        const li = document.createElement("li");
        li.textContent = "No scores yet. Be the first!";
        list.appendChild(li);
      } else {
        top5.forEach((entry, index) => {
          const li = document.createElement("li");
          li.innerHTML =
            "<span>" +
            (index + 1) +
            ". " +
            entry.name +
            "</span><span>" +
            entry.score +
            " pts</span>";
          list.appendChild(li);
        });
      }

      board.appendChild(list);
      summary.appendChild(board);

      const btn = document.createElement("button");
      btn.className = "play-again-btn";
      btn.textContent = "Play Again";
      btn.onclick = () => {
        score = 0;
        scoreEl.textContent = score;
        current = 0;
        updateProgress();
        renderQuestion();
      };
      summary.appendChild(btn);

      contentEl.appendChild(summary);
    }

    // ---------------- INIT ----------------
    (function init() {
      playerName = prompt("Enter player name (optional):") || "Player";
      playerNameLabel.textContent = playerName;
      initAudio();
      scoreEl.textContent = score;
      updateProgress();
      renderQuestion();
    })();
  </script>
</body>
</html>
